"""系统配置文件"""
import os

# ============================================================================
# 地形数据配置
# ============================================================================

# 地形数据JSON文件路径
TERRAIN_DATA_PATH = "Generate_Picture/TerrainData_20251219_191755.json"

# 是否启用地形分析（通视、环境复杂度等）
ENABLE_TERRAIN_ANALYSIS = True


# ============================================================================
# IFS威胁评估配置
# ============================================================================

# 是否启用IFS威胁评估
ENABLE_IFS_ASSESSMENT = True

# IFS评估器权重配置
# 各指标权重总和应为1.0
IFS_CONFIG = {
    'weights': {
        'distance': 0.30,      # 距离指标权重
        'type': 0.25,          # 目标类型权重
        'speed': 0.20,         # 移动速度权重
        'angle': 0.15,         # 攻击角度权重
        'visibility': 0.06,    # 通视条件权重
        'environment': 0.04    # 环境复杂度权重
    }
}

# IFS评估日志详细程度
# 'detailed': 输出各指标得分和贡献度
# 'summary': 只输出最终威胁得分
# 'minimal': 只输出选中的目标ID
IFS_LOG_LEVEL = 'detailed'


# ============================================================================
# OpenAI配置（GPT-4o威胁评估）
# ============================================================================

# OpenAI API密钥（从环境变量读取）
OPENAI_API_KEY = os.environ.get("OPENAI_API_KEY")

# OpenAI API基础URL
OPENAI_BASE_URL = os.environ.get(
    "OPENAI_BASE_URL", 
    "https://api.chatanywhere.tech/v1/"
)

# 是否启用GPT评估
ENABLE_GPT_ASSESSMENT = True


# ============================================================================
# 串口配置
# ============================================================================

# 串口端口号
SERIAL_PORT = "COM7"

# 波特率
SERIAL_BAUDRATE = 9600

# 震动器数量
NUM_VIBRATORS = 8


# ============================================================================
# UDP服务器配置
# ============================================================================

# UDP监听地址
UDP_HOST = "0.0.0.0"

# UDP监听端口
UDP_PORT = 5005

# UDP接收超时时间（秒）
UDP_TIMEOUT = 1.0


# ============================================================================
# 威胁评估策略配置
# ============================================================================

# 威胁评估优先级策略
# 'ifs_first': IFS → GPT → 简单算法
# 'gpt_first': GPT → IFS → 简单算法
# 'simple_only': 仅使用简单算法
THREAT_ASSESSMENT_STRATEGY = 'ifs_first'


# ============================================================================
# 震动反馈配置
# ============================================================================

# 震动强度（0-255）
VIBRATION_INTENSITY = 255

# 震动持续时间（秒）
VIBRATION_DURATION = 3.0

# 震动模式映射
# Tank/IFV: 模式0 (持续震动)
# Soldier: 模式1 (超快脉冲)
VIBRATION_MODE_TANK = 0
VIBRATION_MODE_SOLDIER = 1


# ============================================================================
# 日志配置
# ============================================================================

# 日志级别 (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL = "INFO"

# 日志格式
LOG_FORMAT = '%(asctime)s - %(name)s - %(levelname)s - %(message)s'

# 日志时间格式
LOG_DATE_FORMAT = '%Y-%m-%d %H:%M:%S'

